function parseAbsURL(t){var e=t;if(t&&!t.startsWith("http"))if(t.startsWith("/"))e=location.origin+t;else{var i=location.pathname;i.endsWith("/")||(i=location.pathname.split("/").slice(0,-1).join("/")+"/"),e=location.origin+i+t}return e}var NativeComponentDefaults={"n-object":{res:"architecture/wall-4w-4h"},"n-spawner":{res:"interactables/basketball"},"n-text":{text:"",fontSize:10,width:10,height:1,horizontalAlign:"middle",verticalAlign:"middle"},"n-collider":{center:{x:0,y:0,z:0},type:"environment"},"n-sphere-collider":{isTrigger:!1,center:{x:0,y:0,z:0},radius:0,type:"environment"},"n-box-collider":{isTrigger:!1,center:{x:0,y:0,z:0},size:{x:0,y:0,z:0},type:"environment"},"n-capsule-collider":{isTrigger:!1,center:{x:0,y:0,z:0},radius:0,height:0,direction:"y",type:"environment"},"n-mesh-collider":{isTrigger:!1,convex:!0,type:"environment"},"n-container":{capacity:4},"n-sound":{on:"",res:"",src:"",loop:!1,volume:1,autoplay:!1,oneshot:!1,spatialBlend:1,pitch:1,minDistance:1,maxDistance:12},"n-skeleton-parent":{part:"head",side:"center",index:0,userId:null},"n-cockpit-parent":null,"n-billboard":null,"n-layout-browser":{url:"about:blank",isEnclosure:!1},"n-portal":{targetSpace:null,targetPosition:{x:0,y:0,z:0},targetQuaternion:{x:0,y:0,z:0,w:0}}},NativeComponent=function(t,e,i){if(this.name=t.toLowerCase()||"n-object",this.data=e||null,this.inClient=altspace&&altspace.inClient,NativeComponentDefaults[this.name]?this.data=Object.assign({},NativeComponentDefaults[this.name],this.data):this.data=null,i&&(i instanceof THREE.Object3D||i instanceof THREE.Mesh||i instanceof THREE.Group))this.object=i;else{var n=new THREE.BoxGeometry(1,1,1),a=new THREE.MeshBasicMaterial({color:65280});a.visible=!(!this.data||!this.data.visible),this.object=new THREE.Mesh(n,a)}switch(this.name){case"n-mesh-collider":var s=this;return this.object.traverse(function(t){t instanceof THREE.Mesh&&s.init(t)}),this;case"n-sound":return this.data.src=parseAbsURL(this.data.src),this.init(this.object);case"n-layout-browser":return this.data.is3d=this.data.isEnclosure,this.data.url=parseAbsURL(this.data.url),this.init(this.object);default:return this.init(this.object)}};NativeComponent.prototype.init=function(t){return t.userData.altspace=t.userData.altspace||{},t.userData.altspace.collider=t.userData.altspace.collider||{},t.userData.altspace.collider.enabled=!1,this.inClient&&(altspace.addNativeComponent(t,this.name),this.data&&altspace.updateNativeComponent(t,this.name,this.data)),this},NativeComponent.prototype.remove=function(t){return this.object&&(this.inClient&&altspace.removeNativeComponent(this.object,this.name),t&&this.object.parent.remove(this.object)),this},NativeComponent.prototype.update=function(t,e){return this.object&&(this.data=Object.assign({},this.data,t),this.inClient&&altspace.updateNativeComponent(this.object,this.name,this.data),e&&e(this.object)),this},NativeComponent.prototype.call=function(t,e,i){return this.object&&(this.inClient&&altspace.callNativeComponent(this.object,this.name,t,e),i&&i(this.object)),this},NativeComponent.prototype.getObject=function(t){return!!this.object&&(t&&t(this.object),this.object)},NativeComponent.prototype.addTo=function(t,e){return this.object&&(t.add(this.object),e&&e(this.object)),this};
